<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body style="background-color: #666">
    <div id="app">
      <!-- Page 1 (Add Players) -->
      <div v-if="currentPage == 1">
        <input
          v-model="playerNameInput"
          type="text"
          placeholder="Spielername eingeben"
        />
        <button v-on:click="addPlayer">Add Player</button>
        <ul>
          <li v-for="player in players">{{ player.name }}</li>
        </ul>
        <button v-if="players.length >= 3" v-on:click="goToNextPage">
          Start Game
        </button>
      </div>
      <!-- Page 2 (Reizen) -->
      <div v-if="currentPage == 2">
        <input
          v-model="reizzahlInput"
          type="number"
          placeholder="Reizzahl eingeben"
        />
        <select v-model="selectedPlayerId">
          <option disabled value="0">Select player</option>
          <option v-for="player in players" :value="player.id">
            {{ player.name }}
          </option>
        </select>
        <button :disabled="reizzahlInput <= 0" v-on:click="saveReizzahl">
          Save Reizzahl
        </button>
      </div>
    </div>
    <script>
      var app = new Vue({
        el: "#app",
        data: {
          playerId: 0,
          currentPage: 1,
          players: [],
          playerNameInput: "",
          reizzahlInput: 0,
          selectedPlayerId: 0,
        },
        methods: {
          addPlayer: function () {
            this.players.push({
              id: (this.playerId += 1),
              name: this.playerNameInput,
              rounds: [],
            });
          },
          goToNextPage: function () {
            this.currentPage += 1;
          },
          saveReizzahl: function () {
            const newPlayers = [];
            for (player of this.players) {
              if (player.id === this.selectedPlayerId) {
                player.rounds.push({ reizzahl: Number(this.reizzahlInput) });
              } else {
                player.rounds.push({ reizzahl: 0 });
              }
              newPlayers.push(player);
            }
          },
        },
      });
    </script>
  </body>
</html>
